# -*-SH-*-
process TEST = {

#service = AdaptorConfig{}

include "Configuration/CompatibilityFragments/data/CompatibilityWith081.cff"

   untracked PSet options =
   {
       untracked vstring Rethrow = {"ProductNotFound"}
   }

  service = MessageLogger {
          untracked vstring destinations = {"cout"}
	  untracked PSet cout = {
		        untracked string threshold = "INFO"
		        # string threshold = "DEBUG"
			untracked PSet default = { untracked int32 limit = -1  }
		      }
           untracked vstring debugModules = { "test" }
  }
  
  source = PoolSource {
     untracked vstring fileNames = {
       "file:/tmp/sergeant/FEC11720-4248-DB11-85FA-000E0C3EE2D9.root"
       }
     untracked int32 maxEvents = 10
     # untracked uint32 skipEvents = 250
  }
    
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    
   include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
   include "Geometry/CaloEventSetup/data/CaloTopology.cfi"

# defines sequence trackerlocalreco
include "Configuration/Examples/data/RecoLocalTracker.cff"
# defines sequence muonlocalreco
include "Configuration/Examples/data/RecoLocalMuon.cff"
# defines  sequence ecalLocalRecoSequence
include "RecoLocalCalo/EcalRecProducers/data/ecalLocalRecoSequence.cff"
# define sequence hcalLocalRecoSequence
include "Configuration/Examples/data/RecoLocalHcal.cff"
###### 
sequence localreco = { trackerlocalreco& muonlocalreco &  ecalLocalRecoSequence & hcalLocalRecoSequence}
######
include "Configuration/JetMET/data/calorimetry-caltowers.cff"
include "Configuration/JetMET/data/calorimetry-jetmet.cff"
include "Configuration/JetMET/data/calorimetry-jetmet-gen.cff"

###### Track reconstruction
# Seeds 
  include "RecoTracker/TkSeedGenerator/data/GlobalMixedSeeds.cff"
  include "RecoTracker/TkSeedGenerator/data/GlobalPixelSeeds.cff"                           

# Ckf
  include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cff"

# Final Fit
  include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"

sequence ckftracks = {globalMixedSeeds,globalPixelSeeds, ckfTrackCandidates,ctfWithMaterialTracks}

# Vertices
#
include "RecoVertex/PrimaryVertexProducer/data/OfflinePrimaryVerticesFromCTFTracks.cff"
   
   # es_module = TrackerGeometricDetESModule {}

    module test = TestIsoTracks {
          InputTag src3 = offlinePrimaryVerticesFromCTFTracks
	  untracked string inputTrackLabel = 'ctfWithMaterialTracks'
	  double rvert = 0.5

      InputTag EBRecHitCollectionLabel = ecalRecHit:EcalRecHitsEB
      InputTag EERecHitCollectionLabel = ecalRecHit:EcalRecHitsEE
      InputTag CaloTowerCollectionLabel = towerMaker
      InputTag HBHERecHitCollectionLabel = hbhereco
      InputTag HORecHitCollectionLabel = horeco
      InputTag DTRecSegment4DCollectionLabel = dt4DSegments
      InputTag CSCSegmentCollectionLabel = cscSegments
      
      
      bool useEcal = true
      bool useHcal = true
      bool useMuon = false
    }
    
    path p = {localreco, caloTowersRec, ckftracks, offlinePrimaryVerticesFromCTFTracks,test}
}

